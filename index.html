<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FightingMusic</title>
    <!-- logo -->
    <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <!-- 引入font -->
    <!-- <link rel="stylesheet" href="font/iconfont.css"> -->
    <!-- 引入外部css -->
    <link rel="stylesheet" href="js/icheck-1.x/skins/flat/_all.css">
    <!-- 导入jquery文件 -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <!-- iCheck-1.x的复选框插件-->
    <script src="js/icheck-1.x/icheck.min.js"></script>
    <link rel="stylesheet" href="css/geci.css">
    <link rel="stylesheet" href="css/list.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_845956_pjczjbzau9.css">
    <style>
        .bobo{position: absolute;top:100%;left: 0;}
    </style>
</head>
<body>
    <!-- home页面 -->
    <div class="player_main" style="z-index:3" id="mainplayer">
        <!-- 头部 -->
        <div class="playernav_bar">       
            <!-- <img src="img/logo1.gif" alt="" width="30" height="30">   -->
            <!-- <a class="playernav_bar_content" href="javascript:;">退出</a>             -->
            <a class="playernav_bar_content" href="javascript:;" id="landingUser">登录</a>
            <!-- <a class="playernav_bar_content"><i class="iconfont icon-touxiang"></i></a> -->
        </div> 
        <!-- 内容区 -->
        <div class="player_content">
            <div class="palyercon_left">
                <ul>
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-quanbu"></i><span>全部歌曲</span></a>
                    </li>
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-lishi"></i><span>播放历史</span></a>
                    </li>
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-aixinkong"></i><span>我喜欢</span></a>
                    </li>
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-shoucang"></i><span>收藏</span></a>
                    </li>
                </ul>
                <div class="hr"></div>
                <div class="song_sheet">
                    <span>我创建的歌单</span>
                    <a href="javascript:;" class="f_r js_songsheet"><i class="iconfont icon-jiahaotianjia"></i></a>
                </div>
                <ul class="js_songlist songlist_main">
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-yinle"></i><span>歌单一</span></a>
                    </li>
                    <li class="left_li">
                        <a href="javascript:;"><i class="iconfont icon-yinle"></i><span>歌单二</span></a>
                    </li>
                    <li class="left_li">
                        <a href="javascript:;"> <i class="iconfont icon-yinle"></i><span>歌单三</span></a>
                    </li>
                </ul>
            </div>
            <div class="palyercon_right">
                <!-- 编辑区 -->
                <div class="palyercon_right_tool">
                    <a href="javascript:;" id="shangchuancopyban">
                        <i class="iconfont icon-shangchuancopyban"></i>
                        <span>上传歌曲</span>
                    </a>
                    <a href="javascript:;" class="palyercon_right_tool_add" id="tooladd">
                        <i class="iconfont icon-tianjia"></i>
                        <span>添加到</span>
                    </a>
                    <a href="javascript:;">
                        <i class="iconfont icon-shoucang"></i>
                        <span>收藏</span>
                    </a>
                    <a href="javascript:;">
                        <i class="iconfont icon-lajitong"></i>
                        <span>删除</span>
                    </a>
                    <div class="search_music">
                        <i class="iconfont icon-fangdajing"></i>
                        <input type="text" placeholder="搜索音乐">
                    </div>
                </div>
                <!-- 添加 -->
                <div class="add_songer" style="display:none;" id="addsong">
                    <ul>
                        <li><a href="javascript:;">我喜欢</a></li>
                        <li><a href="javascript:;">收藏</a></li>
                        <li>添加到歌单</li>
                        <li><a href="javascript:;">歌单一</a></li>
                        <li><a href="javascript:;">歌单二</a></li>
                    </ul>
                </div>
                <!-- 详细 -->
                <!-- 播放列表 -->
                <div class="palyercon_right_list" id="songlist"></div>
            </div>
        </div>   
        <!-- footer -->
        <div class="music_footer" id="footerpage"></div>
        <!--弹框  -->
        <div class="erro_frame" style="display:none">
            <i class="iconfont icon-danchujinggao erro_frame_commond"></i>
            <div class="erro_frame_commond">请选择操作的单曲</div>
        </div>
    </div>

    <!-- 歌词界面 -->
    <div class="bobo" style="display:none" id="gecipage"></div>
    <!-- 登陆页面 -->
    <div class="commingpage" style="display:none" id="landingPage"></div>
    <!-- 上传界面  -->
    <div class="commingpage" id="uploadpage" style="display:none"></div>
    <!-- 背景模糊 -->
    <div class="bg-img-mask"></div>
    <div class="bg-img"></div>
    
    
    <script type="text/javascript" src="js/scroll.js"></script>
    <script type="text/javascript" src="js/player.js"></script>
    <script>
        //load()方法页面加载
        $("#gecipage").load("pages/lyricpage.html",function(){
            console.log("!2")
            new scrollDom("pre_1","prevalue_1","precess_1","js_cirlctbox");
            new scrollDom("pre1_1","prevalue1_1","precess1_1","js_cirlctbox")
        });
        $("#landingPage").load("pages/loginpage.html");
        $("#uploadpage").load("pages/uploadpage.html");
        $("#songlist").load("pages/songlistpage.html");
        $("#footerpage").load("pages/footerpage.html",function(){
            new scrollDom("pre","prevalue","precess","js_cirlctbox");
            new scrollDom("pre1","prevalue1","precess1","js_cirlctbox")
        });
        $(document).ready(function(){
        let play ={
            init(){
                //播放停止切换
                this.list();
                this.prPrev();
                this.next();
                this.muted();
                this.modeswitch();
                this.lover();
                this.addSonesheet();
                this.homelistPlayer()
                console.log("1a")
            },
            list(){
                //ajax
                /*
                        id: "1",
                        name: "在路上",
                        src: "musicfile/小茶 - 在路上.mp3",
                        autor: "小茶",
                        lrcSrc: "",
                */
                let songArr =[
                    {
                        id: "1",
                        name: "在路上",
                        src: "musicfile/小茶 - 在路上.mp3",
                        autor: "小茶",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "Codeine Crystals",
                        src: "musicfile/cLouT CoHeN,LILG$TAR - Codeine Crystals.mp3",
                        autor: "cLouT CoHeN,LILG$TAR",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "玫瑰花的葬礼",
                        src: "musicfile/许嵩 - 玫瑰花的葬礼.mp3",
                        autor: "许嵩",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "退后",
                        src: "musicfile/周杰伦 - 退后.mp3",
                        autor: "周杰伦",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "Wild",
                        src: "musicfile/Local Sound - Wild.mp3",
                        autor: "Local Sound",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "Colors (Sam Feldt Radio版)",
                        src: "musicfile/Sam Feldt、Halsey - Colors (Sam Feldt Radio版).mp3",
                        autor: "Sam Feldt、Halsey",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "Closer (ARMNHMR Remix)",
                        src: "musicfile/ARMNHMR - Closer (ARMNHMR Remix).mp3",
                        autor: "ARMNHMR",
                        lrcSrc: "",
                    },
                    {
                        id: "1",
                        name: "抑郁",
                        src: "musicfile/K418,Bon.Y - 抑郁.mp3",
                        autor: "K418,Bon.Y",
                        lrcSrc: "",
                    },
                ];
                var indexSong = songArr.length;
                var songsrc ="";
                var arr = [];
                var ulDoms = document.getElementById("js_idsonglist")
                for(var i=0;i<indexSong;i++){
                    var jsonSong = songArr[i];
                    var time="";
                    songsrc = songArr[i].src;;
                    arr.push(songsrc);
                    playerMusic.time(function(){
                        console.log(this.time)
                    })
                    ulDoms.innerHTML += `
                    <li class="song_list">
                        <div class="song_list_content">
                            <div class="songlist_header_list songlist_header_check song_list_li song_cursor"><input type="checkbox"></div>
                            <div class="songlist_header_list songlist_header_song song_cursor">
                                <span class="listnum"></span>
                                <span>${jsonSong.name}</span>
                                <div class="songer_tools ">
                                    <a href="javascript:;" class="js_lover"><i class="iconfont icon-aixinkong1"></i></a>
                                    <a href="javascript:;" class="tuzi js_stop" id="test_stop"><i class="iconfont icon-xinzanting1"></i></a> 
                                    <a href="javascript:;" id="xiangxi"><i class="iconfont icon-gongneng" ></i></a>
                                </div>
                            </div>
                            <div class="songlist_header_list songlist_header_person song_cursor">${jsonSong.autor}</div>
                            <div class="songlist_header_list songlist_header_time js_time" id="">${time}</div>
                        </div> 
                    </li>
                    `
                }
                playerMusic.addMusic(arr);
                console.log()
              

            },
            //上一首切换
            prPrev(){
                var $this = this;
                $(".icon-youbofang-copy-copy").click(function(){
                    $(".js_stop i").removeClass("icon-xinzanting1");
                    $(".js_stop i").addClass("icon-xinzanting");
                    playerMusic.prev();
                   
                })
            },
            //暂停播放切换
            togglePlay(val){
                var arr1 = $(".js_songlistheader").children();
                if($(arr1[e]).find(".js_stop i").hasClass("icon-xinzanting1")){
                    $(arr1[e]).find(".js_stop i").removeClass("icon-xinzanting1").addClass("icon-xinzanting");
                    playerMusic.play();
                } else {
                    $(arr1[e]).find(".js_stop i").removeClass("icon-xinzanting").addClass("icon-xinzanting1");
                    playerMusic.stop();
                }                    
            },
            //下一首切换
            next(){
                $(".icon-youbofang").click(function(){
                    $(".js_stop i").removeClass("icon-xinzanting1").addClass("icon-xinzanting");
                    playerMusic.next();
                })
            },
            //静音切换
            muted(){
                $(".js_metd").click(function(){
                    console.log($(this).find('i').hasClass("icon-xinyinliang"))
                    if($(this).find('i').hasClass("icon-xinyinliang")){
                        $(this).find('i').removeClass("icon-xinyinliang").addClass("icon-yinliang");
                        playerMusic.stopVolome();  
                    } else {
                        $(this).find('i').removeClass("icon-yinliang").addClass("icon-xinyinliang");
                        playerMusic.stopVolome();  
                    }
                })
            },
            //模式切换
            modeswitch(){

            },
            //音量播放
            soundCountrol(){
                
            },
            //收藏
            lover(){
                $(".js_lover").click(function(){
                    console.log($(this).find('i').hasClass("icon-aixinkong1"))
                    if($(this).find('i').hasClass("icon-aixinkong1")){
                        $(this).find('i').removeClass("icon-aixinkong1").addClass("icon-aixin1").css("color","red");

                    }else{
                        $(this).find('i').removeClass("icon-aixin1").addClass("icon-aixinkong1 ").css("color","#fff");
                    }
                })
            },
            //添加新的歌单
            addSonesheet(){
                $(".js_songsheet").click(function(){
                    var html = `
                    <li class="left_li">
                        <input type="text" class="js_input">
                    </li>
                    `
                    var ulDoms = document.getElementsByClassName("js_songlist");
                    var a = $(".js_songlist").append(html);
                    console.log(a)
                    document.onkeydown = function(e){
                        // var html1 = document.createElement("span");
                        var html1 = `<a href="javascript:;"> <i class="iconfont icon-yinle"></i><span class="js_content"></span></a>`
                        if(e.keyCode == 13) {
                            var val = $(".js_songlist li:last").find("input").val();
                            $(".js_songlist li:last").remove("input").append(html1);
                            $(".js_songlist li:last").find(".js_content").html(val);
                            console.log( $(".left_li").find("input").css("display","none").append(html1).html(val))
                        }
                    }
                })
            },
            //列表播放() 
            homelistPlayer() {
                var $this = this;
                var inde = 0;
                var arrList = $(".js_songlistheader").children();
                console.log("!121")
                $.each(arrList, function(index,val) {
                    $(arrList[index]).find(".listnum").html(index+1);
                    $(arrList[index]).click(function(){
                        
                        $this.togglePlay(index).trigger('click');
                        
                })
			    });
            },
            //删除操作
            deleteList() {}
        }
        play.init();


        
        $('input').iCheck({
            checkboxClass: 'icheckbox_flat-grey',
            radioClass: 'iradio_flat-grey'
          });
        });
        $(document).ready(function(){
            $("#xiangxi").click(function(e){
                $("#xiangxixi").fadeToggle(400) ;
                $("#addsong").hide();
                $(".songer_tools").css("display"," inline-block")
                e.stopPropagation();
            });
            $("#tooladd").click(function(e){
                $("#xiangxixi").hide();
                $("#addsong").fadeToggle(400) ;
                e.stopPropagation();
            })
            $(document).click(function(){
                // if(!(event.target == dom || $(event.target).closest(".xiangxi").length>0)){
                    $("#xiangxixi").hide();
                                     
                // }
                  $("#addsong").hide();
                // $("#player").hide();
            })
            $("#imgshow").click(function(){
                // $("#gecipage").css({"top":"0"}).fadeIn("4000");
                $("#gecipage").css({"display":"block"}).animate({
                    "top":"0",
                    
                },500)
                $("#mainplayer").hide()
            })
            $("#logodowon").click(function(){
                // $("#gecipage").css({"top":"100px"}).fadeOut("4000");
                $("#gecipage").animate({
                    "top":"100%",         
                },500).css({"display":"none"})
                $("#mainplayer").show();
            });
            $("#playerlan").click(function(e){
                if($("#player").css("display") == "none") {
                    $("#player").css({"display":"inline-block"}).animate({
                        "right":"-80px"
                    },"fast");                    
                } else {
                    $("#player").css({"display":"none"}).fadeOut();
                };
                e.stopPropagation();
            });
            $("#landingUser").click(function(){
                $("#landingPage").show();
            });
            $(".landing_title").click(function(){
                $("#landingPage").hide();
            });


            $("#shangchuancopyban").click(function(){
                $("#uploadpage").show();
            });
            $("#upload").click(function(){
                $("#uploadpage").hide();
            });

        })

    
    </script>
</body>
</html>